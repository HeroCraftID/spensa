(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{14503:(e,t,s)=>{"use strict";s.d(t,{oR:()=>c}),s(12115);let a=0,r=new Map,l=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],o={toasts:[]};function d(e){o=i(o,e),n.forEach(e=>{e(o)})}function c(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:s});return d({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:s}})}}},44096:(e,t,s)=>{Promise.resolve().then(s.bind(s,67833))},53999:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(52596),r=s(39688);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},67833:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(95155),r=s(12115),l=s(35695),i=s(71007),n=s(32919),o=s(78749),d=s(92657),c=s(75525),u=s(69803),m=s(13052),x=s(97168),f=s(88482),h=s(89852),p=s(82714),g=s(54059),b=s(9428),v=s(53999);let N=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(g.bL,{className:(0,v.cn)("grid gap-2",s),...r,ref:t})});N.displayName=g.bL.displayName;let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(g.q7,{ref:t,className:(0,v.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,a.jsx)(g.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(b.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});j.displayName=g.q7.displayName;var y=s(99474),w=s(14503);function S(){let e=(0,l.useRouter)(),[t,s]=(0,r.useState)(1),[g,b]=(0,r.useState)(!1),[S,A]=(0,r.useState)(""),[C,T]=(0,r.useState)(""),[R,k]=(0,r.useState)(""),[I,F]=(0,r.useState)(""),[E,_]=(0,r.useState)(""),[O,P]=(0,r.useState)(""),[M,J]=(0,r.useState)(""),[q,D]=(0,r.useState)(""),[z,L]=(0,r.useState)(!1),[V,U]=(0,r.useState)(""),[Y,B]=(0,r.useState)(""),[G,$]=(0,r.useState)("");(0,r.useEffect)(()=>{let t=sessionStorage.getItem("registrationToken"),s=sessionStorage.getItem("registrationRole");if(!t||!s){e.push("/main/register/token");return}$(s)},[e]);let Q=async()=>{try{b(!0);let e=sessionStorage.getItem("username");if((await fetch("https://api.metrocraftproduction.xyz/edu/spensa/absen/v1/admin/user/2fa/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:Y,username:e})})).ok)return b(!1),!0;return b(!1),console.log("error"),!1}catch(e){return b(!1),console.log(e),!1}},W=async()=>{var e;let t=sessionStorage.getItem("registrationToken")||"",s=(null===(e=sessionStorage.getItem("registrationRole"))||void 0===e?void 0:e.toLowerCase())||"",a=sessionStorage.getItem("registrationNIP")||"",r=await fetch("https://api.metrocraftproduction.xyz/edu/spensa/absen/v1/admin/user/create",{method:"POST",headers:{"Content-Type":"application/json",token:t},body:JSON.stringify({NIP:a,username:O,name:R,password:M,role:s,gender:I,address:E})});if(!r.ok)return!1;{let e=await r.json();return sessionStorage.setItem("username",e.data.admin.username),A(e.data.qrCode),T(e.data.admin.mfaEntry),!0}},Z=async()=>{if(b(!0),1===t){if(!R||!I||!E){(0,w.oR)({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"}),b(!1);return}}else if(2===t){if(!O||!M||!q){(0,w.oR)({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"}),b(!1);return}if(M!==q){(0,w.oR)({title:"Password Mismatch",description:"Passwords do not match. Please try again.",variant:"destructive"}),b(!1);return}W()}else if(3===t);else if(4===t&&!1==await Q()){(0,w.oR)({title:"Invalid Code",description:"Please enter a valid 6-digit MFA code.",variant:"destructive"}),b(!1);return}setTimeout(()=>{b(!1),t<5?s(t+1):(sessionStorage.removeItem("registrationToken"),sessionStorage.removeItem("registrationRole"),e.push("/main/login"))},500)},H=[{num:1,label:"Info                 "},{num:2,label:"Account"},{num:3,label:"MFA"},{num:4,label:"Verify"}];return(0,a.jsxs)("div",{className:"flex h-screen w-full items-center justify-center bg-[#0a0e17] relative overflow-hidden",children:[(0,a.jsx)("div",{className:"animated-bg"}),(0,a.jsx)("div",{className:"register-grid-background"}),(0,a.jsx)("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 rounded-full bg-blue-500/5 blur-3xl"}),(0,a.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 rounded-full bg-indigo-500/5 blur-3xl"}),(0,a.jsxs)(f.Zp,{className:"w-full max-w-2xl border border-blue-900/30 bg-[#0a0e17]/90 backdrop-blur-sm shadow-lg relative z-10 mx-4",children:[(0,a.jsxs)(f.aR,{className:"space-y-6 pb-0",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-[#38b6ff]",children:"ACCOUNT SETUP"}),(0,a.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:[1===t&&"Step 1: Basic Information",2===t&&"Step 2: Account Credentials",3===t&&"Step 3: MFA Setup",4===t&&"Step 4: MFA Verification",5===t&&"Your account has been created"]})]}),t<5&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"flex justify-center items-center gap-x-4",children:H.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:(0,v.cn)("w-8 h-8 rounded-full flex items-center justify-center border transition-all","translate-y-[5px]",e.num<=t?"border-[#38b6ff] text-[#38b6ff]":"border-gray-600 text-gray-500"),children:(0,a.jsx)("span",{className:"text-sm",children:e.num})}),(0,a.jsx)("p",{className:(0,v.cn)("text-xs mt-2",e.num<=t?"text-[#38b6ff]":"text-gray-500"),children:e.label})]}),s<H.length-1&&(0,a.jsx)("div",{className:"w-16 md:w-16 h-[2px] bg-gray-600 mx-4"})]},e.num))})})]}),(0,a.jsx)(f.Wu,{className:"pt-6 px-8",children:(()=>{switch(t){case 1:return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.J,{htmlFor:"name",className:"text-sm font-medium text-white",children:"Full Name"}),(0,a.jsx)(h.p,{id:"name",placeholder:"Enter your full name",className:"border-blue-900/30 bg-blue-950/20 text-white placeholder:text-gray-500",value:R,onChange:e=>k(e.target.value),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.J,{htmlFor:"gender",className:"text-sm font-medium text-white",children:"Gender"}),(0,a.jsxs)(N,{value:I,onValueChange:F,className:"flex space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(j,{value:"male",id:"male"}),(0,a.jsx)(p.J,{htmlFor:"male",className:"text-white",children:"Male"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(j,{value:"female",id:"female"}),(0,a.jsx)(p.J,{htmlFor:"female",className:"text-white",children:"Female"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.J,{htmlFor:"address",className:"text-sm font-medium text-white",children:"Address"}),(0,a.jsx)(y.T,{id:"address",placeholder:"Enter your address",className:"border-blue-900/30 bg-blue-950/20 text-white placeholder:text-gray-500 min-h-[100px]",value:E,onChange:e=>_(e.target.value),required:!0})]})]})});case 2:return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.J,{htmlFor:"username",className:"text-sm font-medium text-white",children:"Username"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-blue-400"}),(0,a.jsx)(h.p,{id:"username",placeholder:"Choose a username",className:"pl-9 border-blue-900/30 bg-blue-950/20 text-white placeholder:text-gray-500",value:O,onChange:e=>P(e.target.value),required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.J,{htmlFor:"password",className:"text-sm font-medium text-white",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-blue-400"}),(0,a.jsx)(h.p,{id:"password",type:z?"text":"password",placeholder:"Create a strong password",className:"pl-9 pr-9 border-blue-900/30 bg-blue-950/20 text-white placeholder:text-gray-500",value:M,onChange:e=>J(e.target.value),required:!0}),(0,a.jsxs)(x.$,{type:"button",variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-8 w-8 p-0",onClick:()=>L(!z),children:[z?(0,a.jsx)(o.A,{className:"h-4 w-4"}):(0,a.jsx)(d.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:z?"Hide password":"Show password"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.J,{htmlFor:"confirm-password",className:"text-sm font-medium text-white",children:"Confirm Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(n.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-blue-400"}),(0,a.jsx)(h.p,{id:"confirm-password",type:z?"text":"password",placeholder:"Confirm your password",className:"pl-9 border-blue-900/30 bg-blue-950/20 text-white placeholder:text-gray-500",value:q,onChange:e=>D(e.target.value),required:!0})]})]})]})});case 3:return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"bg-white p-4 rounded-md mx-auto w-48 h-48 flex items-center justify-center",children:(0,a.jsx)("img",{src:S,className:"h-32 w-32 text-black"})}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-400",children:"Scan this QR code with your authenticator app"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.J,{className:"text-sm font-medium text-white",children:"Manual Entry Code"}),(0,a.jsx)("div",{className:"bg-blue-950/20 p-3 rounded-md border border-blue-900/30 font-mono text-center text-white",children:C}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"If you can't scan the QR code, you can manually enter this code in your authenticator app."})]}),(0,a.jsx)("div",{className:"bg-blue-950/20 p-3 rounded-md border border-blue-900/30",children:(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2 text-blue-400"}),(0,a.jsx)("span",{className:"text-gray-300",children:"We recommend using Google Authenticator, Microsoft Authenticator, or Authy."})]})})]})});case 4:return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(p.J,{htmlFor:"mfa-code",className:"text-sm font-medium text-white",children:"Enter 6-digit Code"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.A,{className:"absolute left-3 top-2.5 h-4 w-4 text-blue-400"}),(0,a.jsx)(h.p,{id:"mfa-code",placeholder:"Enter the 6-digit code",className:"pl-9 border-blue-900/30 bg-blue-950/20 text-white placeholder:text-gray-500 font-mono text-center text-lg tracking-widest",value:Y,onChange:e=>B(e.target.value.slice(0,6)),maxLength:6,required:!0})]}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Enter the 6-digit code from your authenticator app to verify setup."}),(0,a.jsx)("p",{className:"text-xs text-blue-400",children:"For demo purposes, use code: 123456"})]})})});case 5:return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"space-y-6 text-center",children:[(0,a.jsx)("div",{className:"mx-auto bg-blue-900/20 rounded-full w-16 h-16 flex items-center justify-center",children:(0,a.jsx)(c.A,{className:"h-8 w-8 text-blue-400"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-white",children:"Registration Complete!"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Your account has been successfully created. You can now log in to the system."}),(0,a.jsx)("div",{className:"bg-blue-950/20 p-3 rounded-md border border-blue-900/30",children:(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2 text-blue-400"}),(0,a.jsxs)("span",{className:"text-gray-300",children:["You have been registered as a ",(0,a.jsx)("span",{className:"font-bold text-blue-400",children:G}),". Your access level has been set accordingly."]})]})})]})})}})()}),(0,a.jsx)(f.wL,{className:"pt-2 px-8 pb-8",children:(0,a.jsx)(x.$,{className:"w-full bg-[#38b6ff] hover:bg-[#38b6ff]/90 text-white py-6",onClick:Z,disabled:g,children:g?"Processing...":5===t?"Go to Login":(0,a.jsxs)("div",{className:"flex items-center justify-center w-full",children:["Continue ",(0,a.jsx)(m.A,{className:"ml-1 h-4 w-4"})]})})})]})]})}},82714:(e,t,s)=>{"use strict";s.d(t,{J:()=>d});var a=s(95155),r=s(12115),l=s(40968),i=s(74466),n=s(53999);let o=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(l.b,{ref:t,className:(0,n.cn)(o(),s),...r})});d.displayName=l.b.displayName},88482:(e,t,s)=>{"use strict";s.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>n,wL:()=>u});var a=s(95155),r=s(12115),l=s(53999);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});i.displayName="Card";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});n.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})});u.displayName="CardFooter"},89852:(e,t,s)=>{"use strict";s.d(t,{p:()=>i});var a=s(95155),r=s(12115),l=s(53999);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},97168:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var a=s(95155),r=s(12115),l=s(99708),i=s(74466),n=s(53999);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,a.jsx)(u,{className:(0,n.cn)(o({variant:r,size:i,className:s})),ref:t,...c})});d.displayName="Button"},99474:(e,t,s)=>{"use strict";s.d(t,{T:()=>i});var a=s(95155),r=s(12115),l=s(53999);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...r})});i.displayName="Textarea"}},e=>{var t=t=>e(e.s=t);e.O(0,[598,940,82,441,684,358],()=>t(44096)),_N_E=e.O()}]);